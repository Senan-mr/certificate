<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8">
  <title>Sertifikat Yoxlayıcı</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

  <h1>Sertifikat Yoxlayıcı</h1>

  <input
    type="text"
    id="code"
    placeholder="Sertifikat kodunu yaz"
  />

  <button onclick="verify()">Yoxla</button>

  <p id="result"></p>

  <script>
    const supabaseUrl = 'https://wqxkyfaqsdphrdvmijjv.supabase.co';
    const supabaseKey = 'ANON_PUBLIC_KEY_BURDA';
    const supabase = supabase.createClient(supabaseUrl, supabaseKey);

    async function verify() {
      const code = document.getElementById('code').value.trim();
      const result = document.getElementById('result');

      const { data, error } = await supabase
        .from('certificates')
        .select('*')
        .eq('code', code)
        .single();

      console.log('Gələn data:', data);
      console.log('Xəta:', error);

      if (error || !data) {
        result.innerText = 'Tapılmadı ❌';
      } else {
        result.innerText =
          `${data.name}, ${data.institute}, ${data.year} — Doğrulandı ✅`;
      }
    }
  </script>

</body>
</html>
